{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Profile{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/profile_edit.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Edit Profile</h1>
    {% comment %} <form id="profile-form" method="POST" enctype="multipart/form-data"> {% endcomment %}
        <form id="profile-form" method="POST" enctype="multipart/form-data" data-url="{{ api_url }}">
            {% csrf_token %}


            <p><strong>Current Avatar:</strong>
            {% if profile_instance.avatar %}
                <img src="{{ profile_instance.avatar.url }}" alt="Current Avatar" style="max-width: 150px; display: block; margin-bottom: 10px;">
                <span>If you want to change the avatar, choose a new file below. Otherwise, the current avatar will be retained.</span>
            {% else %}
                <span>No avatar uploaded yet.</span>
            {% endif %}
        </p>

        <p><strong>Upload New Avatar:</strong>
            <input type="file" name="avatar">
        </p>

        <div class="form-group">
            <label for="gender">Gender:</label>
            <select id="gender" name="gender">
                <option value="Male" {% if profile.gender == "Male" %}selected{% endif %}>Male</option>
                <option value="Female" {% if profile.gender == "Female" %}selected{% endif %}>Female</option>
            </select>
        </div>

        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" value="{{ profile.age }}">
        </div>

        <div class="form-group">
            <label for="height">Height:</label>
            <input type="number" step="0.01" id="height" name="height" value="{{ profile.height }}">
        </div>

        <div class="form-group">
            <label for="weight">Weight:</label>
            <input type="number" step="0.01" id="weight" name="weight" value="{{ profile.weight }}">
        </div>

        <div class="form-group">
            <label for="bmi">BMI:</label>
            <input type="number" step="0.01" id="bmi" name="bmi" value="{{ profile.bmi }}">
        </div>

        <div class="form-group">
            <label for="body_fat_percentage">Body Fat Percentage:</label>
            <input type="number" step="0.01" id="body_fat_percentage" name="body_fat_percentage" value="{{ profile.body_fat_percentage }}">
        </div>

        <div class="form-group">
            <label for="waist_size">Waist Size:</label>
            <input type="number" step="0.01" id="waist_size" name="waist_size" value="{{ profile.waist_size }}">
        </div>

        <div class="form-group">
            <label for="chest_size">Chest Size:</label>
            <input type="number" step="0.01" id="chest_size" name="chest_size" value="{{ profile.chest_size }}">
        </div>

        <div class="form-group">
            <label for="health_conditions">Health Conditions:</label>
            <textarea id="health_conditions" name="health_conditions">{{ profile.health_conditions }}</textarea>
        </div>

        <div class="form-group">
            <label for="fitness_goals">Fitness Goals:</label>
            <textarea id="fitness_goals" name="fitness_goals">{{ profile.fitness_goals }}</textarea>
        </div>

        <div class="form-group">
            <label for="dietary_preferences">Dietary Preferences:</label>
            <textarea id="dietary_preferences" name="dietary_preferences">{{ profile.dietary_preferences }}</textarea>
        </div>

        {% comment %} <div class="form-group">
            <label for="avatar">Avatar:</label>
            <input type="file" id="avatar" name="avatar">
        </div> {% endcomment %}


        <button type="submit">Save Changes</button>
    </form>

    <div id="error-messages"></div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/profile_edit.js' %}"></script>
{% endblock %}
